"use strict";(self["webpackChunkdost"]=self["webpackChunkdost"]||[]).push([[683],{2217:function(t,s,e){t.exports=e.p+"img/logo-sm.606dd372.png"},9683:function(t,s,e){e.r(s),e.d(s,{default:function(){return X}});var a=e(641),i=e(33),n=e(3751),l=e(2217);const o={class:"col-lg-12"},r={class:"modal-body p-5"},d={class:"customform"},c={key:0,class:"p-2 mt-1"},u={class:"row"},h={class:"col-12 mt-n1 mb-0"},p={key:0,class:"alert alert-danger alert-dismissible fade show material-shadow mb-xl-0 mt-3 fs-11",role:"alert"},m={class:"mt-4"},g={key:0},f={key:1},k={key:1,class:"p-2 mt-4"},b={class:"text-muted text-center mb-4 mx-lg-3"},v={class:"fw-semibold text-lowercase"},w={class:"d-flex gap-2"},L=["value","onInput","onKeydown","onPaste"],x={key:0,class:"alert alert-danger alert-dismissible fade show material-shadow mb-xl-0 mt-3 mb-n3 fs-11",role:"alert"},y={class:"mt-4"};function C(t,s,e,C,I,E){const _=(0,a.g2)("BButton"),D=(0,a.g2)("router-link"),A=(0,a.g2)("BRow"),F=(0,a.g2)("loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("div",{class:"modal-body login-modal p-5",style:(0,i.Tr)(I.isIos?{height:"250px"}:"")},[(0,a.Lk)("div",o,[(0,a.Lk)("div",{class:"text-center mt-n4 mb-n4",style:(0,i.Tr)(I.isIos?{paddingTop:"70px"}:"")},[...s[3]||(s[3]=[(0,a.Fv)('<img src="'+l+'" alt="" class="mb-3" style="width:70px;height:70px;" data-v-225d72f8><h1 class="mb-0 ff-secondary fw-semibold text-capitalize lh-base fs-13" data-v-225d72f8><span class="text-white" data-v-225d72f8>DEPARTMENT OF SCIENCE AND TECHNOLOGY</span></h1><p class="text-white mb-0 fs-11" data-v-225d72f8><span class="fw-semibold" data-v-225d72f8>One<span class="text-info" data-v-225d72f8>DOST</span>4U</span> : <span class="text-muted" data-v-225d72f8>Solutions and Opportunities for All</span></p>',3)])],4)])],4),(0,a.Lk)("div",r,[(0,a.Lk)("form",d,[(0,a.bF)(A,{class:"g-3",style:{"margin-top":"-35px"}},{default:(0,a.k6)(()=>[I.sent?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",b,[s[9]||(s[9]=(0,a.Lk)("h4",{class:""},"Enter One-Time Password",-1)),(0,a.Lk)("p",null,[s[8]||(s[8]=(0,a.eW)("Please enter the one-time Password (OTP) that we sent to ",-1)),(0,a.Lk)("span",v,(0,i.v_)(E.maskedEmail),1)])]),(0,a.Lk)("form",null,[(0,a.Lk)("div",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.digits,(t,s)=>((0,a.uX)(),(0,a.CE)("input",{key:s,ref_for:!0,ref:"otpInputs",type:"text",class:"form-control form-control-lg text-center flex-fill",maxlength:"1",value:I.digits[s],onInput:t=>E.onInput(t,s),onKeydown:t=>E.onKeydown(t,s),onPaste:t=>E.onPaste(t,s),inputmode:"numeric",pattern:"[0-9]*",autocomplete:"one-time-code",style:{padding:"0"}},null,40,L))),128))])]),I.error?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("strong",null,(0,i.v_)(I.error),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",y,[(0,a.bF)(_,{variant:"primary",class:"w-100 mt-2",type:"submit",disabled:I.sub,onClick:E.submit},{default:(0,a.k6)(()=>[...s[10]||(s[10]=[(0,a.eW)("Submit",-1)])]),_:1},8,["disabled","onClick"]),(0,a.bF)(_,{variant:"white",class:"w-100 mt-2 bg-primary-subtle",onClick:s[1]||(s[1]=t=>I.sent=!1),type:"button"},{default:(0,a.k6)(()=>[...s[11]||(s[11]=[(0,a.eW)("Back",-1)])]),_:1})])])):((0,a.uX)(),(0,a.CE)("div",c,[s[7]||(s[7]=(0,a.Lk)("div",{class:"text-muted text-center mb-4 mx-lg-3"},[(0,a.Lk)("h4",{class:""},"Hello, Welcome"),(0,a.Lk)("p",null,[(0,a.eW)("Login with your "),(0,a.Lk)("span",{class:"fw-semibold"},"Email Address")])],-1)),(0,a.Lk)("form",null,[(0,a.Lk)("div",u,[(0,a.Lk)("div",h,[(0,a.bo)((0,a.Lk)("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>I.form.email=t),type:"text",class:"form-control form-control-lg",placeholder:"Please enter email",style:{"text-transform":"lowercase","background-color":"white"}},null,512),[[n.Jo,I.form.email]])])])]),I.error?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("strong",null,(0,i.v_)(I.error),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",m,[(0,a.bF)(_,{variant:"primary",class:"w-100 mt-n1",type:"button",onClick:E.send,disabled:I.next},{default:(0,a.k6)(()=>[I.next?((0,a.uX)(),(0,a.CE)("span",f,"Sending..")):((0,a.uX)(),(0,a.CE)("span",g,"Next"))]),_:1},8,["onClick","disabled"]),(0,a.bF)(_,{variant:"white",class:"w-100 mt-2 bg-primary-subtle",type:"button"},{default:(0,a.k6)(()=>[...s[4]||(s[4]=[(0,a.eW)("Cancel",-1)])]),_:1}),s[6]||(s[6]=(0,a.Lk)("div",{class:"signin-other-title text-white text-center mt-3"},[(0,a.Lk)("h5",{class:"bg-light fs-13 mb-4 title"},"or")],-1)),(0,a.bF)(D,{to:"/register"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{variant:"success",class:"w-100 mt-0",type:"button"},{default:(0,a.k6)(()=>[...s[5]||(s[5]=[(0,a.Lk)("span",null,"Register",-1)])]),_:1})]),_:1})])]))]),_:1})])])]),(0,a.bF)(F,{active:I.isLoading,"onUpdate:active":s[2]||(s[2]=t=>I.isLoading=t),"background-color":"black","can-cancel":!1,"is-full-page":t.fullPage},{default:(0,a.k6)(()=>[...s[12]||(s[12]=[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("img",{src:l,class:"heartbeat-spin",style:{width:"40px",height:"auto"},alt:"loading..."}),(0,a.Lk)("br"),(0,a.Lk)("br"),(0,a.Lk)("span",{class:"text-white fw-semibold fs-10"},"Good things take timeâ€¦")],-1)])]),_:1},8,["active","is-full-page"])],64)}var I=e(6546),E=e(4335),_=e(6278),D=e(3688),A=e.n(D),F={components:{Loading:A()},data(){return{isIos:"ios"===I.Ii.getPlatform(),form:{email:null,code:null},digits:Array.from({length:6},()=>""),sent:!1,next:!1,sub:!1,validationErrors:{},error:"",showModal:!1,isLoading:!1,res:null}},computed:{code(){return this.digits.join("")},maskedEmail(){if(!this.form.email)return"";const[t,s]=this.form.email.split("@");if(t.length<=4)return`${"*".repeat(t.length)}@${s}`;const e=t.slice(0,t.length-4);return`${e}****@${s}`}},methods:{...(0,_.i0)({signIn:"auth/login"}),async send(){this.next=!0,await E.A.post("login",this.form).then(t=>{t.data.status?(this.next=!1,this.sent=!0):this.next=!1}).catch(({response:t})=>{422===t.status?this.validationErrors=t.data.errors:(this.validationErrors={},this.error=t.data.message),this.next=!1}).finally(()=>{this.processing=!1})},submit(){this.sub=!0,this.isLoading=!0,this.form.code=this.code,E.A.post("verify",this.form).then(async t=>{t.data.status?(this.sub=!1,localStorage.setItem("token",t.data.token),await this.signIn(),this.isLoading=!1):(this.res=t,this.isLoading=!1)}).catch(({response:t})=>{422===t.status?this.validationErrors=t.data.errors:(this.validationErrors={},this.error=t.data.message),this.sub=!1,this.res=t,this.isLoading=!1})},focusInput(t){const s=this.$refs.otpInputs;if(!s)return;const e=Array.isArray(s)?s[t]:s;if(e&&e.focus){e.focus();try{e.setSelectionRange(0,1)}catch(a){console.log(a)}}},onInput(t,s){const e=t.target.value||"",i=e.replace(/\D/g,"");if(!i)return this.digits[s]="",void this.updateCode();const n=i.split("");for(let a=0;a<n.length&&s+a<this.digits.length;a++)this.digits[s+a]=n[a];const l=Math.min(s+n.length,this.digits.length-1);(0,a.dY)(()=>this.focusInput(l)),this.updateCode()},onKeydown(t,s){const e=t.key,i=t.target;"Backspace"===e?""===(i.value||"")&&s>0?(t.preventDefault(),this.digits[s-1]="",(0,a.dY)(()=>this.focusInput(s-1)),this.updateCode()):setTimeout(()=>{const t=(this.$refs.otpInputs[s]&&this.$refs.otpInputs[s].value||"").replace(/\D/g,"").slice(0,1);this.digits[s]=t||"",this.updateCode()},0):"ArrowLeft"===e?(t.preventDefault(),s>0&&this.focusInput(s-1)):"ArrowRight"===e&&(t.preventDefault(),s<this.digits.length-1&&this.focusInput(s+1))},onPaste(t,s){t.preventDefault();const e=(t.clipboardData||window.clipboardData).getData("text")||"",i=e.replace(/\D/g,"").split("");if(0===i.length)return;for(let a=0;a<i.length&&s+a<this.digits.length;a++)this.digits[s+a]=i[a];const n=Math.min(s+i.length,this.digits.length-1);(0,a.dY)(()=>this.focusInput(n)),this.updateCode()},updateCode(){this.form.code=this.code,this.$emit("update",this.code)},hide(){this.showModal=!1}}},P=e(6262);const T=(0,P.A)(F,[["render",C],["__scopeId","data-v-225d72f8"]]);var X=T}}]);
//# sourceMappingURL=683.c2a1f08b.js.map